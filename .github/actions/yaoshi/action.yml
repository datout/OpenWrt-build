name: 'My Composite Action'
description: 'Combines multiple steps'
runs:
  using: "composite"
  steps:
    - name: 瀵嗗寵妫€娴?
      shell: bash
      run: |
        cd "$GITHUB_WORKSPACE"
        if [[ -z "${{ env.REPO_TOKEN }}" ]]; then
           echo -e "\033[31m 鎮ㄦ病鏈夎缃粨搴撳瘑鍖欙紝璇锋寜鏁欑▼璁剧疆濂藉瘑鍖欏啀鏉?\033[0m\n"
           echo -e "\033[32m REPO_TOKEN瀵嗗寵鍒朵綔鏁欑▼锛歨ttps://git.io/jm.md \033[0m\n"
           exit 1
        fi
        [[ -d "mishi" ]] && rm -rf mishi
        git clone --depth=1 -b "${{ github.ref_name }}" https://user:${{ env.REPO_TOKEN }}@github.com/${{github.repository}}.git mishi
        if [ -z "$(ls -1 mishi)" ]; then
           echo -e "\033[31m 鎮ㄧ殑瀵嗗寵閿欒鎴栧凡杩囨湡锛屾垨鍒朵綔鐨勬椂鍊欏嬀閫変笉姝ｇ‘锛岃鎸夋暀绋嬭缃ソ瀵嗗寵鍐嶆潵 \033[0m\n"
           echo -e "\033[32m REPO_TOKEN瀵嗗寵鍒朵綔鏁欑▼锛歨ttps://git.io/jm.md \033[0m\n"
           exit 1
        fi
        [[ -d "mishi" ]] && rm -rf mishi
        git config --global user.email "41898282+github-actions[bot]@users.noreply.github.com"
        git config --global user.name "github-actions[bot]"
branding:
  icon: "terminal"
  color: "gray-dark"
